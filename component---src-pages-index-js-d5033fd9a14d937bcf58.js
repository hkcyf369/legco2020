(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"1iKp":function(e,t,a){"use strict";a("R48M");var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("q1tI")),i=(0,n(a("8/g6")).default)(r.default.createElement("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");t.default=i},RXBc:function(e,t,a){"use strict";a.r(t),a.d(t,"IndexPageQuery",(function(){return U}));a("pJf4"),a("q8oJ"),a("m210"),a("4DPX"),a("zTTH"),a("v9g0"),a("zGcK"),a("YBKJ"),a("gu/5"),a("eoYm"),a("rzGZ"),a("Dq+y"),a("8npG"),a("Ggvi"),a("YbXK"),a("cFtU");var n=a("q1tI"),r=a.n(n),i=a("vrFN"),l=a("Wbzz"),o=(a("E5k/"),a("VphZ")),c=a("e89E"),s=a("AiFK");var u=function(e){var t=e.data,a=e.summary,i=e.title,l=Object(n.useRef)(),u=Object(n.useRef)(),d=Object(c.a)(u);return Object(n.useEffect)((function(){var e=Object(o.b)(l.current);if(d){var n={top:0,right:0,bottom:0,left:0},r=25,c=d.width-n.left-n.right,u=d.height-n.top-n.bottom,p=u/2,m=Object(o.c)(t,(function(e){return e.value})),f=function(e,t){var a=Object(o.a)().domain([0,t]).range([0,100]),n=0;return e.map((function(e){return n+=e.value,Object.assign(Object.assign({},e),{},{value:e.value,cumulative:n-e.value,label:e.label,percent:a(e.value)})})).filter((function(e){return e.value>0}))}(t,m),g=Object(o.a)().domain([0,m]).range([0,c]);e.selectAll("rect").data(f).join("rect").attr("class","rect-stacked").attr("x",(function(e){return g(e.cumulative)})).attr("y",p).attr("height",r).attr("width",(function(e){return g(e.value)})).style("fill",(function(e){return e.color})).style("stroke",s.a.palette.background.paper),Object.keys(a).forEach((function(t,n){var r=3,i=30,l=22;e.selectAll("."+t+"-name-bg").remove(),e.append("rect").attr("class",t+"-name-bg").attr("x",(function(){return 0===n?0+s.a.spacing(2):d.width-s.a.spacing(2)-i})).attr("y",0).attr("width",i).attr("height",l).style("fill",a[t].background),e.selectAll("."+t+"-name").remove(),e.append("text").attr("class",t+"-name").attr("text-anchor",a[t].pos).text(a[t].name).attr("x",(function(){return 0===n?0+s.a.spacing(2)+r:d.width-s.a.spacing(2)-r})).attr("y",16).style("fill","#000000").style("font-size",12).style("font-weight",500),e.selectAll("."+t+"-total").remove(),e.append("text").attr("class",t+"-total").attr("text-anchor",a[t].pos).text(a[t].total).attr("x",(function(){return 0===n?0+s.a.spacing(2):d.width-s.a.spacing(2)})).attr("y",p).style("fill",s.a.palette.text.primary).style("font-size",36).style("font-weight",900)})),e.selectAll(".center-text").remove(),e.append("text").attr("class","center-text").attr("text-anchor","middle").text(i).attr("x",d.width/2).attr("y",16).style("fill",s.a.palette.text.primary).style("font-size",12).style("font-weight",500),e.selectAll(".halfway").remove(),e.append("line").attr("class","halfway").style("stroke",s.a.palette.text.primary).attr("x1",g(m/2)).attr("y1",p-2).attr("x2",g(m/2)).attr("y2",p+r+2),e.selectAll(".halfway-triangle").remove(),e.append("text").attr("class","halfway-triangle").attr("text-anchor","middle").attr("x",g(m/2)).attr("y",p-6).style("fill",s.a.palette.text.primary).style("font-size",12).text("▾"),e.selectAll(".halfway-text").remove(),e.append("text").attr("class","halfway-text").attr("text-anchor","middle").attr("x",g(m/2)).attr("y",p-16).style("fill",s.a.palette.text.primary).style("font-size",12).text(m/2),e.selectAll(".text-label").data(f).join("text").attr("class","text-label").attr("text-anchor","middle").attr("x",(function(e){return g(e.cumulative)+g(e.value)/2})).attr("y",u/2+r+12).style("fill",(function(e){return e.color})).style("font-size",12).style("font-weight",700).text((function(e){return e.label}))}}),[t,d]),r.a.createElement("div",{ref:u},r.a.createElement("svg",{ref:l,style:{overflow:"visible",display:"block",width:"100%",height:"100px"}}))};var d=function(e){var t=e.data,a=e.width,i=Object(n.useRef)(),l=Object(n.useRef)(),s=Object(c.a)(l);return Object(n.useEffect)((function(){var e=Object(o.b)(i.current);if(s){var a=2,n=(s.width-2*a)/3;e.selectAll("rect").data(t).join("rect").attr("class","rect-stacked").attr("x",(function(e,t){return parseInt(t%3,10)*(n+a)})).attr("y",(function(e,t){return parseInt(t/3,10)*(n+a)})).attr("height",n).attr("width",n).style("fill",(function(e){return e.color}))}}),[t,s]),r.a.createElement("div",{ref:l},r.a.createElement("svg",{ref:i,style:{overflow:"visible",display:"block",width:a+"px",height:a+"px"}}))},p=a("lopY"),m=a("ofer"),f=a("wx14"),g=a("ODXe"),y=a("Ff2n"),v=a("iuhU"),b=a("dRu9"),h=a("H2TA"),E=a("wpWl"),x=a("4Hym"),w=a("tr08"),j=a("bfFb"),O=n.forwardRef((function(e,t){var a=e.children,r=e.classes,i=e.className,l=e.collapsedHeight,o=void 0===l?"0px":l,c=e.component,s=void 0===c?"div":c,u=e.disableStrictModeCompat,d=void 0!==u&&u,p=e.in,m=e.onEnter,h=e.onEntered,O=e.onEntering,_=e.onExit,N=e.onExited,k=e.onExiting,I=e.style,A=e.timeout,D=void 0===A?E.b.standard:A,R=e.TransitionComponent,C=void 0===R?b.a:R,M=Object(y.a)(e,["children","classes","className","collapsedHeight","component","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),z=Object(w.a)(),H=n.useRef(),S=n.useRef(null),T=n.useRef(),F="number"==typeof o?"".concat(o,"px"):o;n.useEffect((function(){return function(){clearTimeout(H.current)}}),[]);var G=z.unstable_strictMode&&!d,B=n.useRef(null),J=Object(j.a)(t,G?B:void 0),W=function(e){return function(t,a){if(e){var n=G?[B.current,t]:[t,a],r=Object(g.a)(n,2),i=r[0],l=r[1];e(i,l)}}},q=W((function(e,t){e.style.height=F,m&&m(e,t)})),K=W((function(e,t){var a=S.current?S.current.clientHeight:0,n=Object(x.a)({style:I,timeout:D},{mode:"enter"}).duration;if("auto"===D){var r=z.transitions.getAutoHeightDuration(a);e.style.transitionDuration="".concat(r,"ms"),T.current=r}else e.style.transitionDuration="string"==typeof n?n:"".concat(n,"ms");e.style.height="".concat(a,"px"),O&&O(e,t)})),L=W((function(e,t){e.style.height="auto",h&&h(e,t)})),U=W((function(e){var t=S.current?S.current.clientHeight:0;e.style.height="".concat(t,"px"),_&&_(e)})),Y=W(N),P=W((function(e){var t=S.current?S.current.clientHeight:0,a=Object(x.a)({style:I,timeout:D},{mode:"exit"}).duration;if("auto"===D){var n=z.transitions.getAutoHeightDuration(t);e.style.transitionDuration="".concat(n,"ms"),T.current=n}else e.style.transitionDuration="string"==typeof a?a:"".concat(a,"ms");e.style.height=F,k&&k(e)}));return n.createElement(C,Object(f.a)({in:p,onEnter:q,onEntered:L,onEntering:K,onExit:U,onExited:Y,onExiting:P,addEndListener:function(e,t){var a=G?e:t;"auto"===D&&(H.current=setTimeout(a,T.current||0))},nodeRef:G?B:void 0,timeout:"auto"===D?null:D},M),(function(e,t){return n.createElement(s,Object(f.a)({className:Object(v.a)(r.container,i,{entered:r.entered,exited:!p&&"0px"===F&&r.hidden}[e]),style:Object(f.a)({minHeight:F},I),ref:J},t),n.createElement("div",{className:r.wrapper,ref:S},n.createElement("div",{className:r.wrapperInner},a)))}))}));O.muiSupportAuto=!0;var _=Object(h.a)((function(e){return{container:{height:0,overflow:"hidden",transition:e.transitions.create("height")},entered:{height:"auto",overflow:"visible"},hidden:{visibility:"hidden"},wrapper:{display:"flex"},wrapperInner:{width:"100%"}}}),{name:"MuiCollapse"})(O),N=a("tRbT"),k=a("esk+"),I=a("vOnD"),A=a("9Koi"),D=a("mYdW"),R=a.n(D),C=a("1iKp"),M=a.n(C),z=a("rsHp"),H=a("20nU"),S=a("7Qib"),T=a("efpO");function F(e){return function(e){if(Array.isArray(e))return G(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return G(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var B=I.a.div.withConfig({displayName:"pages__FullWidithWrapper",componentId:"sc-1s2k7oc-0"})(["margin:0 -","px;.fullWidth-title{font-weight:700;text-align:center;padding:","px 0;}"],s.a.spacing(2),s.a.spacing(1)),J=I.a.div.withConfig({displayName:"pages__Container",componentId:"sc-1s2k7oc-1"})(["margin:0 ","px;"],s.a.spacing(2)),W=I.a.div.withConfig({displayName:"pages__DirectHeader",componentId:"sc-1s2k7oc-2"})(["margin:","px 0;"],s.a.spacing(2)),q=I.a.div.withConfig({displayName:"pages__DirectWrapper",componentId:"sc-1s2k7oc-3"})(["display:grid;grid-template-columns:repeat(2,1fr);grid-gap:","px;.seat{padding:","px ","px;border-radius:2px;box-shadow:0 1px 6px 0 ",";.title{display:flex;justify-content:space-between;}.sub-title{font-size:0.65rem;}.roundup-title{margin-top:","px;display:flex;justify-content:space-between;}.roundup-title div{line-height:0.5;}.roundup-title div:last-child{text-align:right;}.roundup{display:flex;justify-content:space-between;line-height:1.2;}.large-number{font-size:2rem;font-weight:900;}.demo{text-align:left;color:",";}.beijing{text-align:right;color:",";}.other{color:",";}}"],s.a.spacing(1),s.a.spacing(1),s.a.spacing(1.5),s.a.palette.divider,s.a.spacing(.5),s.a.palette.warning.main,s.a.palette.info.main,s.a.palette.success.main),K=I.a.div.withConfig({displayName:"pages__TradFCWrapper",componentId:"sc-1s2k7oc-4"})([".situation-group{margin-bottom:","px;}.seat-group{margin-top:","px;display:grid;grid-gap:","px;}.group-title{font-weight:500;margin:","px 0;}.fierce{grid-template-columns:repeat(1,1fr);}","{.fierce{grid-template-columns:repeat(2,1fr);}}.probably_demo,.probably_beijing{grid-template-columns:repeat(2,1fr);}.seat{padding:","px ","px;border-radius:2px;box-shadow:0 1px 6px 0 ",";.title{display:flex;justify-content:space-between;line-height:0;}}.seat.demo{border-top:3px "," solid;}.seat.beijing{border-top:3px "," solid;}"],s.a.spacing(3),s.a.spacing(1.5),s.a.spacing(1),s.a.spacing(2),s.a.breakpoints.up("sm"),s.a.spacing(1),s.a.spacing(1.5),s.a.palette.divider,s.a.palette.warning.main,s.a.palette.info.main),L=I.a.div.withConfig({displayName:"pages__ExpandButton",componentId:"sc-1s2k7oc-5"})(["text-align:center;"]),U=(t.default=function(e){var t=e.data,a=t.allGeoFuncDc2,o=t.allTradFunc,c=t.candidatesGroupByCamp,f=Object(n.useState)(!1),g=f[0],y=f[1],v=[].concat(F(Array.from(a.nodes)),F(Array.from(o.nodes))),b=Object(A.a)().t,h=Object(p.a)(s.a.breakpoints.up("md")),E={UNRESOLVED:70};v.forEach((function(e){Object.keys(e).filter((function(e){return e.includes("expected")})).map((function(t){var a=(e.type+"_"+t).toUpperCase();void 0===E[a]?E[a]=Number(e[t]):E[a]+=Number(e[t]),E.UNRESOLVED-=Number(e[t])}))}));var x=Object.keys(H.a).map((function(e){return{key:e,label:b("stackedBar."+e),value:E[e],color:H.a[e]}})),w={DEMO:{name:b("alias.DEMO"),pos:"start",total:0,background:s.a.palette.warning.light},BEIJING:{name:b("alias.BEIJING"),pos:"end",total:0,background:s.a.palette.info.light}};x.forEach((function(e){e.key.includes("DEMO")&&(w.DEMO.total+=e.value),e.key.includes("BEIJING")&&(w.BEIJING.total+=e.value)}));var j=Object(A.a)().i18n,O=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(W,null,r.a.createElement(m.a,{variant:"body2"},b("direct_election_description"))),r.a.createElement(q,null,e.sort((function(e,t){return e.order>t.order?1:e.order<t.order?-1:0})).map((function(e){var t=c.group.find((function(e){return"BEIJING"===e.camp})).edges.filter((function(t){return t.node.constituency===e.key})).length||0,a=c.group.find((function(e){return"OTHER"===e.camp})).edges.filter((function(t){return t.node.constituency===e.key})).length||0,n=c.group.find((function(e){return"DEMO"===e.camp})).edges.filter((function(t){return t.node.constituency===e.key})).length||0;return r.a.createElement("div",{key:e.key,className:"seat clickable",onClick:function(){Object(l.navigate)(Object(T.a)(j,"/constituency/"+e.key))}},r.a.createElement("div",{className:"title"},r.a.createElement(m.a,{variant:"caption",color:"textSecondary"},b("no_of_seats",{seats:e.seats})),r.a.createElement("div",{className:"sub-title"},b("estimated_result"))),r.a.createElement("div",{className:"title"},r.a.createElement("div",null,r.a.createElement(m.a,{variant:"h5"},Object(T.b)(j,e,"alias"))),r.a.createElement("div",null,r.a.createElement("div",{style:{width:"40px",height:"40px"}},r.a.createElement(d,{width:40,height:40,data:Object(S.a)(e)})))),r.a.createElement("div",{className:"roundup-title"},r.a.createElement("div",null,r.a.createElement(m.a,{variant:"caption"},b("alias.DEMO")),r.a.createElement("div",{className:"sub-title"},b("intented_list"))),r.a.createElement("div",null,r.a.createElement(m.a,{variant:"caption"},b("alias.BEIJING")),r.a.createElement("div",{className:"sub-title"},b("intented_list")))),r.a.createElement("div",{className:"roundup"},r.a.createElement("div",{className:"large-number demo"},n||"-"),r.a.createElement("div",null,r.a.createElement(m.a,{variant:"body1",color:"textSecondary"},"vs")),a?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"large-number other"},a||"-"),r.a.createElement("div",null,r.a.createElement(m.a,{variant:"body1",color:"textSecondary"},"vs"))):"",r.a.createElement("div",{className:"large-number beijing"},t||"-")))}))))},I=function(e){var t=e.reduce((function(e,t){var a=e.findIndex((function(e){return e.title===b("tag."+t.situation)}));return a<0?[].concat(F(e),[{key:t.key,title:b("tag."+t.situation),situation:t.situation,order:parseFloat(t.situation_order),content:[t]}]):(e[a].content.push(t),e)}),[]);return r.a.createElement(K,null,t.sort((function(e,t){return e.order>t.order?1:e.order<t.order?-1:0})).map((function(e){return r.a.createElement("div",{className:"situation-group",key:"group-"+e.title},r.a.createElement("div",{className:"group-title"},b("no_of_seats_fc",{title:e.title,seats:e.content.reduce((function(e,t){return e+Number(t.seats)}),0)})),r.a.createElement(m.a,{variant:"body2"},b(e.situation+"_description")),r.a.createElement("div",{className:"seat-group "+e.situation},e.content.sort((function(e,t){return Number(e.situation_order)>Number(t.situation_order)?1:Number(e.situation_order)<Number(t.situation_order)?-1:0})).map((function(e){var t=Number(e.expected_win_demo)||0,a=Number(e.expected_win_beijing)||0,n="";return t>a?n="demo":t<a&&(n="beijing"),r.a.createElement("div",{key:e.key,className:"seat "+n},r.a.createElement(m.a,{variant:"caption",color:"textSecondary"},e.seats,"席 -"," ",b("tag.electors_composition_"+e.electors_composition)),r.a.createElement(m.a,{variant:"h5"},Object(T.b)(j,e,"name")))}))))})))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{title:"Home"}),r.a.createElement(B,null,r.a.createElement(u,{data:x,summary:w,title:b("simulation_result")}),r.a.createElement(L,{onClick:function(){return y(!g)}},g?r.a.createElement(R.a,null):r.a.createElement(M.a,null)),r.a.createElement(_,{in:g,timeout:100},z.b.map((function(e){return r.a.createElement(u,{key:e.year,data:e.result,summary:e.summary,title:e.year})}))),h?r.a.createElement(N.a,{container:!0,spacing:3},r.a.createElement(N.a,{item:!0,xs:6},r.a.createElement("div",{className:"fullWidth-title"},b("geo_func_dc2")),O(a.nodes)),r.a.createElement(N.a,{item:!0,xs:6},r.a.createElement("div",{className:"fullWidth-title"},b("trad_func")),I(o.nodes))):r.a.createElement(k.a,{tabs:[{name:"geo_func_dc2",title:b("geo_func_dc2"),content:r.a.createElement(J,null,O(a.nodes))},{name:"trad_func",title:b("trad_func"),content:r.a.createElement(J,null,I(o.nodes))}],onTabChange:function(){}})))},"3292274870")},mYdW:function(e,t,a){"use strict";a("R48M");var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("q1tI")),i=(0,n(a("8/g6")).default)(r.default.createElement("path",{d:"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");t.default=i}}]);
//# sourceMappingURL=component---src-pages-index-js-d5033fd9a14d937bcf58.js.map
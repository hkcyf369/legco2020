(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"1iKp":function(e,t,n){"use strict";n("R48M");var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("q1tI")),i=(0,a(n("8/g6")).default)(r.default.createElement("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");t.default=i},RXBc:function(e,t,n){"use strict";n.r(t),n.d(t,"IndexPageQuery",(function(){return U}));n("pJf4"),n("q8oJ"),n("m210"),n("4DPX"),n("zTTH"),n("v9g0"),n("zGcK"),n("YBKJ"),n("gu/5"),n("eoYm"),n("rzGZ"),n("Dq+y"),n("8npG"),n("Ggvi"),n("YbXK"),n("cFtU");var a=n("q1tI"),r=n.n(a),i=n("vrFN"),o=n("Wbzz"),c=(n("E5k/"),n("VphZ")),l=n("e89E"),u=n("tr08");var s=function(e){var t=e.data,n=e.summary,i=e.title,o=Object(u.a)(),s=Object(a.useRef)(),d=Object(a.useRef)(),m=Object(l.a)(d);return Object(a.useEffect)((function(){var e=Object(c.b)(s.current);if(m){var a={top:0,right:0,bottom:0,left:0},r=25,l=m.width-a.left-a.right,u=m.height-a.top-a.bottom,d=u/2,p=Object(c.c)(t,(function(e){return e.value})),f=function(e,t){var n=Object(c.a)().domain([0,t]).range([0,100]),a=0;return e.map((function(e){return a+=e.value,Object.assign(Object.assign({},e),{},{value:e.value,cumulative:a-e.value,label:e.label,percent:n(e.value)})})).filter((function(e){return e.value>0}))}(t,p),g=Object(c.a)().domain([0,p]).range([0,l]);e.selectAll("rect").data(f).join("rect").attr("class","rect-stacked").attr("x",(function(e){return g(e.cumulative)})).attr("y",d).attr("height",r).attr("width",(function(e){return g(e.value)})).style("fill",(function(e){return e.color})).style("stroke",o.palette.background.paper),Object.keys(n).forEach((function(t,a){var r=3,i=30,c=22;e.selectAll("."+t+"-name-bg").remove(),e.append("rect").attr("class",t+"-name-bg").attr("x",(function(){return 0===a?0+o.spacing(2):m.width-o.spacing(2)-i})).attr("y",0).attr("width",i).attr("height",c).style("fill",n[t].background),e.selectAll("."+t+"-name").remove(),e.append("text").attr("class",t+"-name").attr("text-anchor",n[t].pos).text(n[t].name).attr("x",(function(){return 0===a?0+o.spacing(2)+r:m.width-o.spacing(2)-r})).attr("y",16).style("fill","#000000").style("font-size",12).style("font-weight",500),e.selectAll("."+t+"-total").remove(),e.append("text").attr("class",t+"-total").attr("text-anchor",n[t].pos).text(n[t].total).attr("x",(function(){return 0===a?0+o.spacing(2):m.width-o.spacing(2)})).attr("y",d).style("fill",o.palette.text.primary).style("font-size",36).style("font-weight",900)})),e.selectAll(".center-text").remove(),e.append("text").attr("class","center-text").attr("text-anchor","middle").text(i).attr("x",m.width/2).attr("y",16).style("fill",o.palette.text.primary).style("font-size",12).style("font-weight",500),e.selectAll(".halfway").remove(),e.append("line").attr("class","halfway").style("stroke",o.palette.text.primary).attr("x1",g(p/2)).attr("y1",d-2).attr("x2",g(p/2)).attr("y2",d+r+2),e.selectAll(".halfway-triangle").remove(),e.append("text").attr("class","halfway-triangle").attr("text-anchor","middle").attr("x",g(p/2)).attr("y",d-6).style("fill",o.palette.text.primary).style("font-size",12).text("▾"),e.selectAll(".halfway-text").remove(),e.append("text").attr("class","halfway-text").attr("text-anchor","middle").attr("x",g(p/2)).attr("y",d-16).style("fill",o.palette.text.primary).style("font-size",12).text(p/2),e.selectAll(".text-label").data(f).join("text").attr("class","text-label").attr("text-anchor","middle").attr("x",(function(e){return g(e.cumulative)+g(e.value)/2})).attr("y",u/2+r+12).style("fill",(function(e){return e.color})).style("font-size",12).style("font-weight",700).text((function(e){return e.label}))}}),[t,m]),r.a.createElement("div",{ref:d},r.a.createElement("svg",{ref:s,style:{overflow:"visible",display:"block",width:"100%",height:"100px"}}))};var d=function(e){var t=e.data,n=e.width,i=Object(a.useRef)(),o=Object(a.useRef)(),u=Object(l.a)(o);return Object(a.useEffect)((function(){var e=Object(c.b)(i.current);if(u){var n=2,a=(u.width-2*n)/3;e.selectAll("rect").data(t).join("rect").attr("class","rect-stacked").attr("x",(function(e,t){return parseInt(t%3,10)*(a+n)})).attr("y",(function(e,t){return parseInt(t/3,10)*(a+n)})).attr("height",a).attr("width",a).style("fill",(function(e){return e.color}))}}),[t,u]),r.a.createElement("div",{ref:o},r.a.createElement("svg",{ref:i,style:{overflow:"visible",display:"block",width:n+"px",height:n+"px"}}))},m=n("lopY"),p=n("ofer"),f=n("wx14"),g=n("ODXe"),h=n("Ff2n"),y=n("iuhU"),b=n("dRu9"),v=n("H2TA"),E=n("wpWl"),x=n("4Hym"),w=n("bfFb"),j=a.forwardRef((function(e,t){var n=e.children,r=e.classes,i=e.className,o=e.collapsedHeight,c=void 0===o?"0px":o,l=e.component,s=void 0===l?"div":l,d=e.disableStrictModeCompat,m=void 0!==d&&d,p=e.in,v=e.onEnter,j=e.onEntered,O=e.onEntering,_=e.onExit,N=e.onExited,k=e.onExiting,I=e.style,A=e.timeout,D=void 0===A?E.b.standard:A,R=e.TransitionComponent,C=void 0===R?b.a:R,M=Object(h.a)(e,["children","classes","className","collapsedHeight","component","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),z=Object(u.a)(),H=a.useRef(),S=a.useRef(null),T=a.useRef(),F="number"==typeof c?"".concat(c,"px"):c;a.useEffect((function(){return function(){clearTimeout(H.current)}}),[]);var G=z.unstable_strictMode&&!m,B=a.useRef(null),J=Object(w.a)(t,G?B:void 0),W=function(e){return function(t,n){if(e){var a=G?[B.current,t]:[t,n],r=Object(g.a)(a,2),i=r[0],o=r[1];e(i,o)}}},q=W((function(e,t){e.style.height=F,v&&v(e,t)})),L=W((function(e,t){var n=S.current?S.current.clientHeight:0,a=Object(x.a)({style:I,timeout:D},{mode:"enter"}).duration;if("auto"===D){var r=z.transitions.getAutoHeightDuration(n);e.style.transitionDuration="".concat(r,"ms"),T.current=r}else e.style.transitionDuration="string"==typeof a?a:"".concat(a,"ms");e.style.height="".concat(n,"px"),O&&O(e,t)})),U=W((function(e,t){e.style.height="auto",j&&j(e,t)})),K=W((function(e){var t=S.current?S.current.clientHeight:0;e.style.height="".concat(t,"px"),_&&_(e)})),Y=W(N),P=W((function(e){var t=S.current?S.current.clientHeight:0,n=Object(x.a)({style:I,timeout:D},{mode:"exit"}).duration;if("auto"===D){var a=z.transitions.getAutoHeightDuration(t);e.style.transitionDuration="".concat(a,"ms"),T.current=a}else e.style.transitionDuration="string"==typeof n?n:"".concat(n,"ms");e.style.height=F,k&&k(e)}));return a.createElement(C,Object(f.a)({in:p,onEnter:q,onEntered:U,onEntering:L,onExit:K,onExited:Y,onExiting:P,addEndListener:function(e,t){var n=G?e:t;"auto"===D&&(H.current=setTimeout(n,T.current||0))},nodeRef:G?B:void 0,timeout:"auto"===D?null:D},M),(function(e,t){return a.createElement(s,Object(f.a)({className:Object(y.a)(r.container,i,{entered:r.entered,exited:!p&&"0px"===F&&r.hidden}[e]),style:Object(f.a)({minHeight:F},I),ref:J},t),a.createElement("div",{className:r.wrapper,ref:S},a.createElement("div",{className:r.wrapperInner},n)))}))}));j.muiSupportAuto=!0;var O=Object(v.a)((function(e){return{container:{height:0,overflow:"hidden",transition:e.transitions.create("height")},entered:{height:"auto",overflow:"visible"},hidden:{visibility:"hidden"},wrapper:{display:"flex"},wrapperInner:{width:"100%"}}}),{name:"MuiCollapse"})(j),_=n("tRbT"),N=n("esk+"),k=n("vOnD"),I=n("9Koi"),A=n("mYdW"),D=n.n(A),R=n("1iKp"),C=n.n(R),M=n("rsHp"),z=n("20nU"),H=n("7Qib"),S=n("efpO");function T(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var G=k.b.div.withConfig({displayName:"pages__FullWidithWrapper",componentId:"sc-1s2k7oc-0"})(["margin:0 -","px;.fullWidth-title{font-weight:700;text-align:center;padding:","px 0;}"],(function(e){return e.theme.spacing(2)}),(function(e){return e.theme.spacing(1)})),B=k.b.div.withConfig({displayName:"pages__Container",componentId:"sc-1s2k7oc-1"})(["margin:0 ","px;"],(function(e){return e.theme.spacing(2)})),J=k.b.div.withConfig({displayName:"pages__DirectHeader",componentId:"sc-1s2k7oc-2"})(["margin:","px 0;"],(function(e){return e.theme.spacing(2)})),W=k.b.div.withConfig({displayName:"pages__DirectWrapper",componentId:"sc-1s2k7oc-3"})(["display:grid;grid-template-columns:repeat(2,1fr);grid-gap:","px;.seat{padding:","px ","px;border-radius:2px;box-shadow:0 1px 6px 0 ",";.title{display:flex;justify-content:space-between;}.sub-title{font-size:0.65rem;}.roundup-title{margin-top:","px;display:flex;justify-content:space-between;}.roundup-title div{line-height:0.5;}.roundup-title div:last-child{text-align:right;}.roundup{display:flex;justify-content:space-between;line-height:1.2;}.large-number{font-size:2rem;font-weight:900;}.demo{text-align:left;color:",";}.beijing{text-align:right;color:",";}.other{color:",";}}"],(function(e){return e.theme.spacing(1)}),(function(e){return e.theme.spacing(1)}),(function(e){return e.theme.spacing(1.5)}),(function(e){return e.theme.palette.divider}),(function(e){return e.theme.spacing(.5)}),(function(e){return e.theme.palette.warning.main}),(function(e){return e.theme.palette.info.main}),(function(e){return e.theme.palette.success.main})),q=k.b.div.withConfig({displayName:"pages__TradFCWrapper",componentId:"sc-1s2k7oc-4"})([".situation-group{margin-bottom:","px;}.seat-group{margin-top:","px;display:grid;grid-gap:","px;}.group-title{font-weight:500;margin:","px 0;}.fierce{grid-template-columns:repeat(1,1fr);}","{.fierce{grid-template-columns:repeat(2,1fr);}}.probably_demo,.probably_beijing{grid-template-columns:repeat(2,1fr);}.seat{padding:","px ","px;border-radius:2px;box-shadow:0 1px 6px 0 ",";.title{display:flex;justify-content:space-between;line-height:0;}}.seat.demo{border-top:3px "," solid;}.seat.beijing{border-top:3px "," solid;}"],(function(e){return e.theme.spacing(3)}),(function(e){return e.theme.spacing(1.5)}),(function(e){return e.theme.spacing(1)}),(function(e){return e.theme.spacing(2)}),(function(e){return e.theme.breakpoints.up("sm")}),(function(e){return e.theme.spacing(1)}),(function(e){return e.theme.spacing(1.5)}),(function(e){return e.theme.palette.divider}),(function(e){return e.theme.palette.warning.main}),(function(e){return e.theme.palette.info.main})),L=k.b.div.withConfig({displayName:"pages__ExpandButton",componentId:"sc-1s2k7oc-5"})(["text-align:center;"]),U=(t.default=function(e){var t=e.data,n=t.allGeoFuncDc2,c=t.allTradFunc,l=t.candidatesGroupByCamp,f=Object(a.useState)(!1),g=f[0],h=f[1],y=[].concat(T(Array.from(n.nodes)),T(Array.from(c.nodes))),b=Object(I.a)().t,v=Object(u.a)(),E=Object(m.a)(v.breakpoints.up("md")),x={UNRESOLVED:70};y.forEach((function(e){Object.keys(e).filter((function(e){return e.includes("expected")})).map((function(t){var n=(e.type+"_"+t).toUpperCase();void 0===x[n]?x[n]=Number(e[t]):x[n]+=Number(e[t]),x.UNRESOLVED-=Number(e[t])}))}));var w=Object.keys(z.a).map((function(e){return{key:e,label:b("stackedBar."+e),value:x[e],color:z.a[e]}})),j={DEMO:{name:b("alias.DEMO"),pos:"start",total:0,background:v.palette.warning.light},BEIJING:{name:b("alias.BEIJING"),pos:"end",total:0,background:v.palette.info.light}};w.forEach((function(e){e.key.includes("DEMO")&&(j.DEMO.total+=e.value),e.key.includes("BEIJING")&&(j.BEIJING.total+=e.value)}));var k=Object(I.a)().i18n,A=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(J,null,r.a.createElement(p.a,{variant:"body2"},b("direct_election_description"))),r.a.createElement(W,null,e.sort((function(e,t){return e.order>t.order?1:e.order<t.order?-1:0})).map((function(e){var t=l.group.find((function(e){return"BEIJING"===e.camp})).edges.filter((function(t){return t.node.constituency===e.key})).length||0,n=l.group.find((function(e){return"OTHER"===e.camp})).edges.filter((function(t){return t.node.constituency===e.key})).length||0,a=l.group.find((function(e){return"DEMO"===e.camp})).edges.filter((function(t){return t.node.constituency===e.key})).length||0;return r.a.createElement("div",{key:e.key,className:"seat clickable",onClick:function(){Object(o.navigate)(Object(S.a)(k,"/constituency/"+e.key))}},r.a.createElement("div",{className:"title"},r.a.createElement(p.a,{variant:"caption",color:"textSecondary"},b("no_of_seats",{seats:e.seats})),r.a.createElement("div",{className:"sub-title"},b("estimated_result"))),r.a.createElement("div",{className:"title"},r.a.createElement("div",null,r.a.createElement(p.a,{variant:"h5"},Object(S.c)(k,e,"alias"))),r.a.createElement("div",null,r.a.createElement("div",{style:{width:"40px",height:"40px"}},r.a.createElement(d,{width:40,height:40,data:Object(H.a)(e)})))),r.a.createElement("div",{className:"roundup-title"},r.a.createElement("div",null,r.a.createElement(p.a,{variant:"caption"},b("alias.DEMO")),r.a.createElement("div",{className:"sub-title"},b("intented_list"))),r.a.createElement("div",null,r.a.createElement(p.a,{variant:"caption"},b("alias.BEIJING")),r.a.createElement("div",{className:"sub-title"},b("intented_list")))),r.a.createElement("div",{className:"roundup"},r.a.createElement("div",{className:"large-number demo"},a||"-"),r.a.createElement("div",null,r.a.createElement(p.a,{variant:"body1",color:"textSecondary"},"vs")),n?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"large-number other"},n||"-"),r.a.createElement("div",null,r.a.createElement(p.a,{variant:"body1",color:"textSecondary"},"vs"))):"",r.a.createElement("div",{className:"large-number beijing"},t||"-")))}))))},R=function(e){var t=e.reduce((function(e,t){var n=e.findIndex((function(e){return e.title===b("tag."+t.situation)}));return n<0?[].concat(T(e),[{key:t.key,title:b("tag."+t.situation),situation:t.situation,order:parseFloat(t.situation_order),content:[t]}]):(e[n].content.push(t),e)}),[]);return r.a.createElement(q,null,t.sort((function(e,t){return e.order>t.order?1:e.order<t.order?-1:0})).map((function(e){return r.a.createElement("div",{className:"situation-group",key:"group-"+e.title},r.a.createElement("div",{className:"group-title"},b("no_of_seats_fc",{title:e.title,seats:e.content.reduce((function(e,t){return e+Number(t.seats)}),0)})),r.a.createElement(p.a,{variant:"body2"},b(e.situation+"_description")),r.a.createElement("div",{className:"seat-group "+e.situation},e.content.sort((function(e,t){return Number(e.situation_order)>Number(t.situation_order)?1:Number(e.situation_order)<Number(t.situation_order)?-1:0})).map((function(e){var t=Number(e.expected_win_demo)||0,n=Number(e.expected_win_beijing)||0,a="";return t>n?a="demo":t<n&&(a="beijing"),r.a.createElement("div",{key:e.key,className:"seat "+a},r.a.createElement(p.a,{variant:"caption",color:"textSecondary"},e.seats,"席 -"," ",b("tag.electors_composition_"+e.electors_composition)),r.a.createElement(p.a,{variant:"h5"},Object(S.c)(k,e,"name")))}))))})))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{title:"Home"}),r.a.createElement(G,null,r.a.createElement(s,{data:w,summary:j,title:b("simulation_result")}),r.a.createElement(L,{onClick:function(){return h(!g)}},g?r.a.createElement(D.a,null):r.a.createElement(C.a,null)),r.a.createElement(O,{in:g,timeout:100},M.b.map((function(e){return r.a.createElement(s,{key:e.year,data:e.result,summary:e.summary,title:e.year})}))),E?r.a.createElement(_.a,{container:!0,spacing:3},r.a.createElement(_.a,{item:!0,xs:6},r.a.createElement("div",{className:"fullWidth-title"},b("geo_func_dc2")),A(n.nodes)),r.a.createElement(_.a,{item:!0,xs:6},r.a.createElement("div",{className:"fullWidth-title"},b("trad_func")),R(c.nodes))):r.a.createElement(N.a,{tabs:[{name:"geo_func_dc2",title:b("geo_func_dc2"),content:r.a.createElement(B,null,A(n.nodes))},{name:"trad_func",title:b("trad_func"),content:r.a.createElement(B,null,R(c.nodes))}],onTabChange:function(){}})))},"3292274870")},mYdW:function(e,t,n){"use strict";n("R48M");var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("q1tI")),i=(0,a(n("8/g6")).default)(r.default.createElement("path",{d:"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");t.default=i}}]);
//# sourceMappingURL=component---src-pages-index-js-ade3b34b102dd73e1a80.js.map
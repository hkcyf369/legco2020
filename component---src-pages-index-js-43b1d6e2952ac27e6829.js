(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"1iKp":function(e,t,a){"use strict";a("R48M");var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("q1tI")),i=(0,n(a("8/g6")).default)(r.default.createElement("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");t.default=i},RXBc:function(e,t,a){"use strict";a.r(t),a.d(t,"IndexPageQuery",(function(){return G}));a("pJf4"),a("q8oJ"),a("m210"),a("4DPX"),a("zTTH"),a("v9g0"),a("zGcK"),a("YBKJ"),a("gu/5"),a("eoYm"),a("rzGZ"),a("Dq+y"),a("8npG"),a("Ggvi"),a("YbXK"),a("cFtU");var n=a("q1tI"),r=a.n(n),i=a("vrFN"),l=a("Wbzz"),c=(a("E5k/"),a("VphZ")),o=a("e89E"),u=a("tr08");var s=function(e){var t=e.data,a=e.summary,i=e.title,l=Object(u.a)(),s=Object(n.useRef)(),d=Object(n.useRef)(),m=Object(o.a)(d);return Object(n.useEffect)((function(){var e=Object(c.b)(s.current);if(m){var n={top:0,right:0,bottom:0,left:0},r=25,o=m.width-n.left-n.right,u=m.height-n.top-n.bottom,d=u/2,p=Object(c.c)(t,(function(e){return e.value})),f=function(e,t){var a=Object(c.a)().domain([0,t]).range([0,100]),n=0;return e.map((function(e){return n+=e.value,Object.assign(Object.assign({},e),{},{value:e.value,cumulative:n-e.value,label:e.label,percent:a(e.value)})})).filter((function(e){return e.value>0}))}(t,p),g=Object(c.a)().domain([0,p]).range([0,o]);e.selectAll("rect").data(f).join("rect").attr("class","rect-stacked").attr("x",(function(e){return g(e.cumulative)})).attr("y",d).attr("height",r).attr("width",(function(e){return g(e.value)})).style("fill",(function(e){return e.color})).style("stroke",l.palette.background.paper),Object.keys(a).forEach((function(t,n){var r=3,i=30,c=22;e.selectAll("."+t+"-name-bg").remove(),e.append("rect").attr("class",t+"-name-bg").attr("x",(function(){return 0===n?0+l.spacing(2):m.width-l.spacing(2)-i})).attr("y",0).attr("width",i).attr("height",c).style("fill",a[t].background),e.selectAll("."+t+"-name").remove(),e.append("text").attr("class",t+"-name").attr("text-anchor",a[t].pos).text(a[t].name).attr("x",(function(){return 0===n?0+l.spacing(2)+r:m.width-l.spacing(2)-r})).attr("y",16).style("fill","#000000").style("font-size",12).style("font-weight",500),e.selectAll("."+t+"-total").remove(),e.append("text").attr("class",t+"-total").attr("text-anchor",a[t].pos).text(a[t].total).attr("x",(function(){return 0===n?0+l.spacing(2):m.width-l.spacing(2)})).attr("y",d).style("fill",l.palette.text.primary).style("font-size",36).style("font-weight",900)})),e.selectAll(".center-text").remove(),e.append("text").attr("class","center-text").attr("text-anchor","middle").text(i).attr("x",m.width/2).attr("y",16).style("fill",l.palette.text.primary).style("font-size",12).style("font-weight",500),e.selectAll(".halfway").remove(),e.append("line").attr("class","halfway").style("stroke",l.palette.text.primary).attr("x1",g(p/2)).attr("y1",d-2).attr("x2",g(p/2)).attr("y2",d+r+2),e.selectAll(".halfway-triangle").remove(),e.append("text").attr("class","halfway-triangle").attr("text-anchor","middle").attr("x",g(p/2)).attr("y",d-6).style("fill",l.palette.text.primary).style("font-size",12).text("▾"),e.selectAll(".halfway-text").remove(),e.append("text").attr("class","halfway-text").attr("text-anchor","middle").attr("x",g(p/2)).attr("y",d-16).style("fill",l.palette.text.primary).style("font-size",12).text(p/2),e.selectAll(".text-label").data(f).join("text").attr("class","text-label").attr("text-anchor","middle").attr("x",(function(e){return g(e.cumulative)+g(e.value)/2})).attr("y",u/2+r+12).style("fill",(function(e){return e.color})).style("font-size",12).style("font-weight",700).text((function(e){return e.label}))}}),[t,m]),r.a.createElement("div",{ref:d},r.a.createElement("svg",{ref:s,style:{overflow:"visible",display:"block",width:"100%",height:"100px"}}))};var d=function(e){var t=e.data,a=e.width,i=Object(n.useRef)(),l=Object(n.useRef)(),u=Object(o.a)(l);return Object(n.useEffect)((function(){var e=Object(c.b)(i.current);if(u){var a=2,n=(u.width-2*a)/3;e.selectAll("rect").data(t).join("rect").attr("class","rect-stacked").attr("x",(function(e,t){return parseInt(t%3,10)*(n+a)})).attr("y",(function(e,t){return parseInt(t/3,10)*(n+a)})).attr("height",n).attr("width",n).style("fill",(function(e){return e.color}))}}),[t,u]),r.a.createElement("div",{ref:l},r.a.createElement("svg",{ref:i,style:{overflow:"visible",display:"block",width:a+"px",height:a+"px"}}))},m=a("lopY"),p=a("ofer"),f=a("JQEk"),g=a("tRbT"),y=a("esk+"),b=a("vOnD"),h=a("9Koi"),v=a("mYdW"),x=a.n(v),E=a("1iKp"),w=a.n(E),_=a("rsHp"),j=a("20nU"),k=a("7Qib"),O=a("efpO");function N(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return I(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var A=b.b.div.withConfig({displayName:"pages__FullWidithWrapper",componentId:"sc-1s2k7oc-0"})(["margin:0 -","px;.fullWidth-title{font-weight:700;text-align:center;padding:","px 0;}"],(function(e){return e.theme.spacing(2)}),(function(e){return e.theme.spacing(1)})),z=b.b.div.withConfig({displayName:"pages__Container",componentId:"sc-1s2k7oc-1"})(["margin:0 ","px;"],(function(e){return e.theme.spacing(2)})),C=b.b.div.withConfig({displayName:"pages__DirectHeader",componentId:"sc-1s2k7oc-2"})(["margin:","px 0;"],(function(e){return e.theme.spacing(2)})),D=b.b.div.withConfig({displayName:"pages__DirectWrapper",componentId:"sc-1s2k7oc-3"})(["display:grid;grid-template-columns:repeat(2,1fr);grid-gap:","px;.seat{padding:","px ","px;border-radius:2px;box-shadow:0 1px 6px 0 ",";.title{display:flex;justify-content:space-between;}.roundup-title{margin-top:","px;display:flex;justify-content:space-between;}.roundup-title div{line-height:0.5;}.roundup-title div:last-child{text-align:right;}.roundup{display:flex;justify-content:space-between;line-height:1.2;}.large-number{font-size:2rem;font-weight:900;}.demo{text-align:left;color:",";}.beijing{text-align:right;color:",";}.other{color:",";}}"],(function(e){return e.theme.spacing(1)}),(function(e){return e.theme.spacing(1)}),(function(e){return e.theme.spacing(1.5)}),(function(e){return e.theme.palette.divider}),(function(e){return e.theme.spacing(.5)}),(function(e){return e.theme.palette.warning.main}),(function(e){return e.theme.palette.info.main}),(function(e){return e.theme.palette.success.main})),M=b.b.div.withConfig({displayName:"pages__TradFCWrapper",componentId:"sc-1s2k7oc-4"})([".situation-group{margin-bottom:","px;}.seat-group{margin-top:","px;display:grid;grid-gap:","px;}.group-title{font-weight:500;margin:","px 0;}.fierce{grid-template-columns:repeat(1,1fr);}","{.fierce{grid-template-columns:repeat(2,1fr);}}.probably_demo,.probably_beijing{grid-template-columns:repeat(2,1fr);}.seat{padding:","px ","px;border-radius:2px;box-shadow:0 1px 6px 0 ",";.title{display:flex;justify-content:space-between;line-height:0;}}.seat.demo{border-top:3px "," solid;}.seat.beijing{border-top:3px "," solid;}"],(function(e){return e.theme.spacing(3)}),(function(e){return e.theme.spacing(1.5)}),(function(e){return e.theme.spacing(1)}),(function(e){return e.theme.spacing(2)}),(function(e){return e.theme.breakpoints.up("sm")}),(function(e){return e.theme.spacing(1)}),(function(e){return e.theme.spacing(1.5)}),(function(e){return e.theme.palette.divider}),(function(e){return e.theme.palette.warning.main}),(function(e){return e.theme.palette.info.main})),R=b.b.div.withConfig({displayName:"pages__ExpandButton",componentId:"sc-1s2k7oc-5"})(["text-align:center;"]),G=(t.default=function(e){var t=e.data,a=t.allGeoFuncDc2,c=t.allTradFunc,o=t.candidatesGroupByCamp,b=Object(n.useState)(!1),v=b[0],E=b[1],I=[].concat(N(Array.from(a.nodes)),N(Array.from(c.nodes))),G=Object(h.a)().t,J=Object(u.a)(),S=Object(m.a)(J.breakpoints.up("md")),B={UNRESOLVED:70};I.forEach((function(e){Object.keys(e).filter((function(e){return e.includes("expected")})).map((function(t){var a=(e.type+"_"+t).toUpperCase();void 0===B[a]?B[a]=Number(e[t]):B[a]+=Number(e[t]),B.UNRESOLVED-=Number(e[t])}))}));var F=Object.keys(j.a).map((function(e){return{key:e,label:G("stackedBar."+e),value:B[e],color:j.a[e]}})),T={DEMO:{name:G("alias.DEMO"),pos:"start",total:0,background:J.palette.warning.light},BEIJING:{name:G("alias.BEIJING"),pos:"end",total:0,background:J.palette.info.light}};F.forEach((function(e){e.key.includes("DEMO")&&(T.DEMO.total+=e.value),e.key.includes("BEIJING")&&(T.BEIJING.total+=e.value)}));var W=Object(h.a)().i18n,q=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,null,r.a.createElement(p.a,{variant:"body2"},G("direct_election_description"))),r.a.createElement(D,null,e.sort((function(e,t){return e.order>t.order?1:e.order<t.order?-1:0})).map((function(e){var t=o.group.find((function(e){return"BEIJING"===e.camp})).edges.filter((function(t){return t.node.constituency===e.key})).length||0,a=o.group.find((function(e){return"OTHER"===e.camp})).edges.filter((function(t){return t.node.constituency===e.key})).length||0,n=o.group.find((function(e){return"DEMO"===e.camp})).edges.filter((function(t){return t.node.constituency===e.key})).length||0;return r.a.createElement("div",{key:e.key,className:"seat clickable",onClick:function(){Object(l.navigate)(Object(O.a)(W,"/constituency/"+e.key))}},r.a.createElement("div",{className:"title"},r.a.createElement(p.a,{variant:"caption",color:"textSecondary"},G("no_of_seats",{seats:e.seats})),r.a.createElement("div",{className:"sub-title"},G("estimated_result"))),r.a.createElement("div",{className:"title"},r.a.createElement("div",null,r.a.createElement(p.a,{variant:"h5"},Object(O.c)(W,e,"alias"))),r.a.createElement("div",null,r.a.createElement("div",{style:{width:"40px",height:"40px"}},r.a.createElement(d,{width:40,height:40,data:Object(k.a)(e)})))),r.a.createElement("div",{className:"roundup-title"},r.a.createElement("div",null,r.a.createElement(p.a,{variant:"caption"},G("alias.DEMO")),r.a.createElement("div",{className:"sub-title"},G("intented_list"))),r.a.createElement("div",null,r.a.createElement(p.a,{variant:"caption"},G("alias.BEIJING")),r.a.createElement("div",{className:"sub-title"},G("intented_list")))),r.a.createElement("div",{className:"roundup"},r.a.createElement("div",{className:"large-number demo"},n||"-"),r.a.createElement("div",null,r.a.createElement(p.a,{variant:"body1",color:"textSecondary"},"vs")),a?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"large-number other"},a||"-"),r.a.createElement("div",null,r.a.createElement(p.a,{variant:"body1",color:"textSecondary"},"vs"))):"",r.a.createElement("div",{className:"large-number beijing"},t||"-")))}))))},K=function(e){var t=e.reduce((function(e,t){var a=e.findIndex((function(e){return e.title===G("tag."+t.situation)}));return a<0?[].concat(N(e),[{key:t.key,title:G("tag."+t.situation),situation:t.situation,order:parseFloat(t.situation_order),content:[t]}]):(e[a].content.push(t),e)}),[]);return r.a.createElement(M,null,t.sort((function(e,t){return e.order>t.order?1:e.order<t.order?-1:0})).map((function(e){return r.a.createElement("div",{className:"situation-group",key:"group-"+e.title},r.a.createElement("div",{className:"group-title"},G("no_of_seats_fc",{title:e.title,seats:e.content.reduce((function(e,t){return e+Number(t.seats)}),0)})),r.a.createElement(p.a,{variant:"body2"},G(e.situation+"_description")),r.a.createElement("div",{className:"seat-group "+e.situation},e.content.sort((function(e,t){return Number(e.situation_order)>Number(t.situation_order)?1:Number(e.situation_order)<Number(t.situation_order)?-1:0})).map((function(e){var t=Number(e.expected_win_demo)||0,a=Number(e.expected_win_beijing)||0,n="";return t>a?n="demo":t<a&&(n="beijing"),r.a.createElement("div",{key:e.key,className:"seat "+n},r.a.createElement(p.a,{variant:"caption",color:"textSecondary"},e.seats,"席 -"," ",G("tag.electors_composition_"+e.electors_composition)),r.a.createElement(p.a,{variant:"h5"},Object(O.c)(W,e,"name")))}))))})))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{title:"Home"}),r.a.createElement(A,null,r.a.createElement(s,{data:F,summary:T,title:G("simulation_result")}),r.a.createElement(R,{onClick:function(){return E(!v)}},v?r.a.createElement(x.a,null):r.a.createElement(w.a,null)),r.a.createElement(f.a,{in:v,timeout:100},_.b.map((function(e){return r.a.createElement(s,{key:e.year,data:e.result,summary:e.summary,title:e.year})}))),S?r.a.createElement(g.a,{container:!0,spacing:3},r.a.createElement(g.a,{item:!0,xs:6},r.a.createElement("div",{className:"fullWidth-title"},G("geo_func_dc2")),q(a.nodes)),r.a.createElement(g.a,{item:!0,xs:6},r.a.createElement("div",{className:"fullWidth-title"},G("trad_func")),K(c.nodes))):r.a.createElement(y.a,{tabs:[{name:"geo_func_dc2",title:G("geo_func_dc2"),content:r.a.createElement(z,null,q(a.nodes))},{name:"trad_func",title:G("trad_func"),content:r.a.createElement(z,null,K(c.nodes))}],onTabChange:function(){}})))},"3292274870")},mYdW:function(e,t,a){"use strict";a("R48M");var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("q1tI")),i=(0,n(a("8/g6")).default)(r.default.createElement("path",{d:"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");t.default=i}}]);
//# sourceMappingURL=component---src-pages-index-js-43b1d6e2952ac27e6829.js.map